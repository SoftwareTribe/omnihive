<!DOCTYPE html>
<html>
    <head>
        <%- include('../templates/head') -%>
        <script>
            var status = "<%= status %>";
            var error = "<%= JSON.stringify(error) %>";
            var registeredUrls = <%- JSON.stringify(registeredUrls) %>;
            var restUrls = <%- JSON.stringify(registeredUrls.filter((x) => x.type === "swagger")) %>;
            var graphUrls = <%- JSON.stringify(registeredUrls.filter((x) => x.type === "graphDatabase")) %>;

            console.log(`OH STATUS: ${status}`);

            if (!error || error === "" || error === "{}") {
                console.log(`OH ERROR: NONE`);
            } else {
                console.log(`OH ERROR:`);
                console.log(error);
            }

            console.log(`OH REGISTERED URLS:`);
            console.log(registeredUrls);
        </script>
    </head>
    <body>
        <div class="flex flex-row flex-auto h-full w-full" x-data="{ tab: 'status' }">
            <div class="flex flex-col pt-8 sidebar">
                <button
                    class="px-8 py-4 focus:outline-none focus:bg-gray-500 text-gray-50"
                    :class="{ 'active': tab === 'status' }"
                    @click="tab = 'status'"
                >
                    Status
                </button>
                <button
                    class="px-8 py-4 focus:outline-none focus:bg-gray-500 text-gray-50"
                    :class="{ 'active': tab === 'browsers' }"
                    @click="tab = 'browsers'"
                >
                    Browsers
                </button>
                <button
                    class="px-8 py-4 focus:outline-none focus:bg-gray-500 text-gray-50"
                    :class="{ 'active': tab === 'workers' }"
                    @click="tab = 'workers'"
                >
                    Workers
                </button>
                <button
                    class="px-8 py-4 focus:outline-none focus:bg-gray-500 text-gray-50"
                    :class="{ 'active': tab === 'raw' }"
                    @click="tab = 'raw'"
                >
                    Raw Configuration
                </button>
                <button
                    class="px-8 py-4 focus:outline-none focus:bg-gray-500 text-gray-50"
                    :class="{ 'active': tab === 'log' }"
                    @click="tab = 'log'"
                >
                    Log Viewer
                </button>
                <button
                    class="px-8 py-4 focus:outline-none focus:bg-gray-500 text-gray-50"
                    :class="{ 'active': tab === 'refresh' }"
                    @click="tab = 'refresh'"
                >
                    Refresh Schema
                </button>
                <button
                    class="px-8 py-4 focus:outline-none focus:bg-gray-500 text-gray-50"
                    :class="{ 'active': tab === 'token' }"
                    @click="tab = 'token'"
                >
                    Retrieve Token
                </button>
            </div>
            <div
                class="mt-28 m-auto"
                x-show="tab === 'status'"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 transform scale-90"
                x-transition:enter-end="opacity-100 transform scale-100"
            >
                <div class="m-auto">
                    <img
                        alt="OmniHive Logo"
                        class="m-auto"
                        src="https://res.cloudinary.com/drmwm8u2c/image/upload/c_scale,w_150/v1557346251/branding/logos/omnihive-bee-white.png"
                    />
                </div>
                <div class="flex-auto w-full m-auto text-center mt-9">
                    <span class="text-white text-2xl">OMNIHIVE SERVER</span>
                    <br />
                    <span class="text-yellow-500 text-xl">STATUS: <%= status.toUpperCase() %></span>
                    <br />
                    <br />
                    <span class="text-white text-md">See console log for further information</span>
                </div>
            </div>
            <div
                class="mt-28 m-auto"
                x-show="tab === 'browsers'"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 transform scale-90"
                x-transition:enter-end="opacity-100 transform scale-100"
            >
                <div class="mx-auto mb-8 text-center text-gray-50 text-4xl">Browsers</div>

                <div class="mx-auto mb-8 text-center text-gray-50 text-2xl">Graph</div>
                <div class="flex-col mx-auto">
                    <template x-for="(validUrl) in graphUrls" :key="validUrl.path">
                        <div class="mx-auto text-center mb-4">
                            <a
                                class="text-yellow-500"
                                x-bind:href="validUrl.path"
                                x-text="validUrl.path"
                                target="_blank"
                            ></a>
                        </div>
                    </template>
                </div>

                <div class="mx-auto mt-8 mb-8 text-center text-gray-50 text-2xl">REST</div>
                <div class="flex-col mx-auto">
                    <template x-for="(validUrl) in restUrls" :key="validUrl.path">
                        <div class="mx-auto text-center mb-4">
                            <a
                                class="text-yellow-500"
                                x-bind:href="validUrl.path"
                                x-text="validUrl.path"
                                target="_blank"
                            ></a>
                        </div>
                    </template>
                </div>
            </div>
            <div
                class="m-auto text-gray-50 text-xl"
                x-show="tab === 'workers'"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 transform scale-90"
                x-transition:enter-end="opacity-100 transform scale-100"
            >
                Workers
            </div>
            <div
                class="m-auto text-gray-50 text-xl"
                x-show="tab === 'raw'"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 transform scale-90"
                x-transition:enter-end="opacity-100 transform scale-100"
            >
                Raw Configuration
            </div>
            <div
                class="m-auto text-gray-50 text-xl"
                x-show="tab === 'log'"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 transform scale-90"
                x-transition:enter-end="opacity-100 transform scale-100"
            >
                Log Viewer
            </div>
            <div
                class="m-auto text-gray-50 text-xl"
                x-show="tab === 'refresh'"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 transform scale-90"
                x-transition:enter-end="opacity-100 transform scale-100"
            >
                Refresh Schema
            </div>
            <div
                class="m-auto text-gray-50 text-xl"
                x-show="tab === 'token'"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 transform scale-90"
                x-transition:enter-end="opacity-100 transform scale-100"
            >
                Retrieve Token
            </div>
        </div>
    </body>
</html>
